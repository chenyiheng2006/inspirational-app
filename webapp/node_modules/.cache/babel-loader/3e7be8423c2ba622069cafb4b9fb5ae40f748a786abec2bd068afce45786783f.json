{"ast":null,"code":"import _objectSpread from\"C:/Users/tmf13/Desktop/RJ/APP/webapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import'./LoginRegister.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LoginRegister=_ref=>{let{onLogin}=_ref;const[isLogin,setIsLogin]=useState(true);const[registerType,setRegisterType]=useState('email');// 'email' or 'phone'\nconst[formData,setFormData]=useState({email:'',phone:'',password:'',confirmPassword:'',nickname:'',verificationCode:''});const[errors,setErrors]=useState({});const[isCodeSent,setIsCodeSent]=useState(false);const[countdown,setCountdown]=useState(0);// 表单验证\nconst validateForm=()=>{const newErrors={};if(isLogin){// 登录验证\nif(registerType==='email'&&!formData.email){newErrors.email='请输入邮箱';}else if(registerType==='email'&&!/\\S+@\\S+\\.\\S+/.test(formData.email)){newErrors.email='邮箱格式不正确';}if(registerType==='phone'&&!formData.phone){newErrors.phone='请输入手机号';}else if(registerType==='phone'&&!/^1[3-9]\\d{9}$/.test(formData.phone)){newErrors.phone='手机号格式不正确';}if(!formData.password){newErrors.password='请输入密码';}}else{// 注册验证\nif(registerType==='email'&&!formData.email){newErrors.email='请输入邮箱';}else if(registerType==='email'&&!/\\S+@\\S+\\.\\S+/.test(formData.email)){newErrors.email='邮箱格式不正确';}if(registerType==='phone'&&!formData.phone){newErrors.phone='请输入手机号';}else if(registerType==='phone'&&!/^1[3-9]\\d{9}$/.test(formData.phone)){newErrors.phone='手机号格式不正确';}if(!formData.password){newErrors.password='请输入密码';}else if(formData.password.length<6){newErrors.password='密码长度至少6位';}if(!formData.confirmPassword){newErrors.confirmPassword='请确认密码';}else if(formData.password!==formData.confirmPassword){newErrors.confirmPassword='两次密码输入不一致';}if(!formData.nickname){newErrors.nickname='请输入昵称';}if(!formData.verificationCode){newErrors.verificationCode='请输入验证码';}}setErrors(newErrors);return Object.keys(newErrors).length===0;};// 发送验证码\nconst sendVerificationCode=()=>{if(registerType==='email'&&!formData.email){setErrors({email:'请先输入邮箱'});return;}if(registerType==='phone'&&!formData.phone){setErrors({phone:'请先输入手机号'});return;}// 模拟发送验证码\nsetIsCodeSent(true);setCountdown(60);const timer=setInterval(()=>{setCountdown(prev=>{if(prev<=1){clearInterval(timer);setIsCodeSent(false);return 0;}return prev-1;});},1000);// 模拟验证码（实际项目中应该是后端发送）\nconst mockCode='123456';setTimeout(()=>{alert(\"\\u9A8C\\u8BC1\\u7801\\u5DF2\\u53D1\\u9001\".concat(registerType==='email'?'到邮箱':'到手机',\"\\uFF1A\").concat(mockCode));},1000);};// 提交表单\nconst handleSubmit=e=>{e.preventDefault();if(!validateForm()){return;}if(isLogin){// 登录逻辑\nconst userData={email:registerType==='email'?formData.email:'',phone:registerType==='phone'?formData.phone:'',nickname:formData.nickname||'用户'};onLogin(userData);}else{// 注册逻辑\nif(formData.verificationCode!=='123456'){setErrors({verificationCode:'验证码错误'});return;}const userData={email:registerType==='email'?formData.email:'',phone:registerType==='phone'?formData.phone:'',nickname:formData.nickname};// 注册成功后直接登录\nonLogin(userData);}};// 输入框变化处理\nconst handleInputChange=(field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));// 清除对应字段的错误\nif(errors[field]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:''}));}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-register-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"app-title\",children:\"\\uD83C\\uDF1F \\u52B1\\u5FD7\\u8F6F\\u4EF6\"}),/*#__PURE__*/_jsx(\"p\",{className:\"app-subtitle\",children:\"\\u8BA9\\u6BCF\\u4E00\\u5929\\u90FD\\u5145\\u6EE1\\u6B63\\u80FD\\u91CF\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-switcher\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(isLogin?'active':''),onClick:()=>setIsLogin(true),children:\"\\u767B\\u5F55\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-btn \".concat(!isLogin?'active':''),onClick:()=>setIsLogin(false),children:\"\\u6CE8\\u518C\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"auth-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"register-type-switcher\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"type-btn \".concat(registerType==='email'?'active':''),onClick:()=>setRegisterType('email'),children:[\"\\uD83D\\uDCE7 \\u90AE\\u7BB1\",isLogin?'登录':'注册']}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"type-btn \".concat(registerType==='phone'?'active':''),onClick:()=>setRegisterType('phone'),children:[\"\\uD83D\\uDCF1 \\u624B\\u673A\",isLogin?'登录':'注册']})]}),registerType==='email'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\",value:formData.email,onChange:e=>handleInputChange('email',e.target.value),className:\"form-input \".concat(errors.email?'error':'')}),errors.email&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.email})]}),registerType==='phone'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\",value:formData.phone,onChange:e=>handleInputChange('phone',e.target.value),className:\"form-input \".concat(errors.phone?'error':'')}),errors.phone&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.phone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",value:formData.password,onChange:e=>handleInputChange('password',e.target.value),className:\"form-input \".concat(errors.password?'error':'')}),errors.password&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.password})]}),!isLogin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u8BF7\\u786E\\u8BA4\\u5BC6\\u7801\",value:formData.confirmPassword,onChange:e=>handleInputChange('confirmPassword',e.target.value),className:\"form-input \".concat(errors.confirmPassword?'error':'')}),errors.confirmPassword&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.confirmPassword})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u6635\\u79F0\",value:formData.nickname,onChange:e=>handleInputChange('nickname',e.target.value),className:\"form-input \".concat(errors.nickname?'error':'')}),errors.nickname&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.nickname})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group verification-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u9A8C\\u8BC1\\u7801\",value:formData.verificationCode,onChange:e=>handleInputChange('verificationCode',e.target.value),className:\"form-input verification-input \".concat(errors.verificationCode?'error':'')}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"verification-btn\",onClick:sendVerificationCode,disabled:isCodeSent,children:isCodeSent?\"\".concat(countdown,\"s\"):'获取验证码'}),errors.verificationCode&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.verificationCode})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:isLogin?'立即登录':'注册并登录'}),isLogin&&/*#__PURE__*/_jsx(\"div\",{className:\"login-options\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"forgot-password\",children:\"\\u5FD8\\u8BB0\\u5BC6\\u7801\\uFF1F\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-footer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u7EE7\\u7EED\\u4F7F\\u7528\\u5373\\u8868\\u793A\\u60A8\\u540C\\u610F\\u6211\\u4EEC\\u7684\",/*#__PURE__*/_jsx(\"span\",{className:\"link\",children:\"\\u670D\\u52A1\\u6761\\u6B3E\"}),\"\\u548C\",/*#__PURE__*/_jsx(\"span\",{className:\"link\",children:\"\\u9690\\u79C1\\u653F\\u7B56\"})]})})]})});};export default LoginRegister;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}