{"ast":null,"code":"import _objectSpread from\"C:/Users/tmf13/Desktop/RJ/APP/webapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./MemoInterface.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MemoInterface=_ref=>{let{userData}=_ref;const navigate=useNavigate();const[memos,setMemos]=useState([]);const[showAddModal,setShowAddModal]=useState(false);const[newMemoText,setNewMemoText]=useState('');const[editingMemo,setEditingMemo]=useState(null);useEffect(()=>{// 从localStorage加载备忘录\nconst savedMemos=localStorage.getItem('memos');if(savedMemos){setMemos(JSON.parse(savedMemos));}},[]);const saveMemos=newMemos=>{setMemos(newMemos);localStorage.setItem('memos',JSON.stringify(newMemos));};const addMemo=()=>{if(newMemoText.trim()){const newMemo={id:Date.now(),text:newMemoText.trim(),completed:false,createdAt:new Date().toISOString()};const updatedMemos=[...memos,newMemo];saveMemos(updatedMemos);setNewMemoText('');setShowAddModal(false);}};const toggleMemo=id=>{const updatedMemos=memos.map(memo=>memo.id===id?_objectSpread(_objectSpread({},memo),{},{completed:!memo.completed}):memo);saveMemos(updatedMemos);};const deleteMemo=id=>{if(window.confirm('确定要删除这个备忘录吗？')){const updatedMemos=memos.filter(memo=>memo.id!==id);saveMemos(updatedMemos);}};const startEdit=memo=>{setEditingMemo(memo);setNewMemoText(memo.text);setShowAddModal(true);};const saveEdit=()=>{if(newMemoText.trim()&&editingMemo){const updatedMemos=memos.map(memo=>memo.id===editingMemo.id?_objectSpread(_objectSpread({},memo),{},{text:newMemoText.trim()}):memo);saveMemos(updatedMemos);setEditingMemo(null);setNewMemoText('');setShowAddModal(false);}};const cancelEdit=()=>{setEditingMemo(null);setNewMemoText('');setShowAddModal(false);};// 拖拽排序功能\nconst handleDragStart=(e,index)=>{e.dataTransfer.setData('text/plain',index);};const handleDragOver=e=>{e.preventDefault();};const handleDrop=(e,dropIndex)=>{e.preventDefault();const dragIndex=parseInt(e.dataTransfer.getData('text/plain'));if(dragIndex!==dropIndex){const newMemos=[...memos];const draggedMemo=newMemos[dragIndex];newMemos.splice(dragIndex,1);newMemos.splice(dropIndex,0,draggedMemo);saveMemos(newMemos);}};// 分类显示未完成和已完成的备忘录\nconst incompleteMemos=memos.filter(memo=>!memo.completed);const completedMemos=memos.filter(memo=>memo.completed);return/*#__PURE__*/_jsxs(\"div\",{className:\"memo-interface\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"memo-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:()=>navigate('/'),children:\"\\u2190 \\u8FD4\\u56DE\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\u5907\\u5FD8\\u5F55\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-btn\",onClick:()=>setShowAddModal(true),children:\"+ \\u6DFB\\u52A0\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"memo-content\",children:[incompleteMemos.length>0&&/*#__PURE__*/_jsxs(\"section\",{className:\"memo-section\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u5F85\\u5B8C\\u6210 (\",incompleteMemos.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"memo-list\",children:incompleteMemos.map((memo,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"memo-item \".concat(memo.completed?'completed':''),draggable:!memo.completed,onDragStart:e=>handleDragStart(e,memos.indexOf(memo)),onDragOver:handleDragOver,onDrop:e=>handleDrop(e,memos.indexOf(memo)),children:[/*#__PURE__*/_jsx(\"div\",{className:\"memo-checkbox\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:memo.completed,onChange:()=>toggleMemo(memo.id)})}),/*#__PURE__*/_jsx(\"div\",{className:\"memo-text\",onClick:()=>startEdit(memo),children:memo.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"memo-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"edit-btn\",onClick:()=>startEdit(memo),children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>deleteMemo(memo.id),children:\"\\uD83D\\uDDD1\\uFE0F\"})]})]},memo.id))})]}),completedMemos.length>0&&/*#__PURE__*/_jsxs(\"section\",{className:\"memo-section\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u5DF2\\u5B8C\\u6210 (\",completedMemos.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"memo-list\",children:completedMemos.map(memo=>/*#__PURE__*/_jsxs(\"div\",{className:\"memo-item completed\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"memo-checkbox\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:memo.completed,onChange:()=>toggleMemo(memo.id)})}),/*#__PURE__*/_jsx(\"div\",{className:\"memo-text\",children:memo.text}),/*#__PURE__*/_jsx(\"div\",{className:\"memo-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>deleteMemo(memo.id),children:\"\\uD83D\\uDDD1\\uFE0F\"})})]},memo.id))})]}),memos.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDCDD\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u6682\\u65E0\\u5907\\u5FD8\\u5F55\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u70B9\\u51FB\\u53F3\\u4E0A\\u89D2\\u7684\\\"\\u6DFB\\u52A0\\\"\\u6309\\u94AE\\u521B\\u5EFA\\u4F60\\u7684\\u7B2C\\u4E00\\u4E2A\\u5907\\u5FD8\\u5F55\\u5427\\uFF01\"})]})]}),showAddModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsx(\"h3\",{children:editingMemo?'编辑备忘录':'添加备忘录'}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",value:newMemoText,onChange:e=>setNewMemoText(e.target.value),placeholder:\"\\u8F93\\u5165\\u5907\\u5FD8\\u5F55\\u5185\\u5BB9...\",autoFocus:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn cancel-btn\",onClick:cancelEdit,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn save-btn\",onClick:editingMemo?saveEdit:addMemo,disabled:!newMemoText.trim(),children:editingMemo?'保存':'添加'})]})]})})]});};export default MemoInterface;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}